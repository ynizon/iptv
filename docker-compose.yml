services:
  laravel:
    build: .
    container_name: laravel_iptv
    volumes:
      - .:/var/www
      - ./vendor:/var/www/vendor
      - ./database:/var/www/database
    working_dir: /var/www
    ports:
      - "80:8000"
    command: >
      sh -c "
      if [ ! -f vendor/autoload.php ]; then
        composer install --no-interaction;
      fi &&
      php artisan key:generate &&
      touch database/database.sqlite &&
      cron &&
      php artisan serve --host=0.0.0.0 --port=8000"

